# Release Plan: R1.1 - Instance Management API
## Phase 1a: Core APIs

**Document ID**: RP-R1.1-INSTANCE-API
**Version**: 1.0
**Created**: 2026-01-25
**Status**: In Progress
**Priority**: P0 - CRITICAL

---

## Release Summary

| Attribute | Value |
|-----------|-------|
| **Release #** | R1.1 |
| **BRS Reference** | BRS 2.7 |
| **Phase** | Phase 1a - Core APIs |
| **SDLC Track** | Backend (10 stages) |
| **Target Release Date** | _______________ |
| **UAT Signoff Date** | _______________ |
| **Business Owner** | _______________ |

---

## 1. Release Objective

Implement the **Instance Management API** that handles WordPress instance lifecycle management including provisioning, health checks, and resource monitoring.

### Key Capabilities
- WordPress instance provisioning (ECS/EFS/RDS)
- Instance health monitoring
- Resource scaling and management
- DynamoDB state tracking (PENDING -> IN_PROGRESS -> COMPLETED/FAILED/STUCK)
- Cross-account management (DEV/SIT/PROD)

---

## 2. User Stories Included

### From BRS 2.7 Instance Management

| Story ID | User Story | Priority | Status |
|----------|-----------|----------|--------|
| IM-001 | Provision new WordPress instance | P0 | In Progress |
| IM-002 | Check instance health status | P0 | Pending |
| IM-003 | Scale instance resources | P1 | Pending |
| IM-004 | Terminate instance | P0 | Pending |
| IM-005 | View instance logs | P1 | Pending |
| IM-006 | Restart instance | P0 | Pending |
| IM-007 | Backup instance state | P1 | Pending |
| IM-008 | Restore instance from backup | P1 | Pending |
| IM-009 | Monitor resource usage | P1 | Pending |
| IM-010 | Cross-account provisioning | P0 | Pending |

---

## 3. Dependencies

### Upstream Dependencies (Required Before Start)

| Dependency | Type | Status | Owner |
|------------|------|--------|-------|
| R1.0 Tenant Management API | Release | COMPLETE | API Team |
| ECS Cluster (dev-cluster) | Infrastructure | COMPLETE | DevOps |
| DynamoDB Tenants Table | Infrastructure | COMPLETE | DevOps |
| Lambda Environment Config | Infrastructure | COMPLETE | DevOps |
| GitHub Repository | Repository | COMPLETE | DevOps |

### Downstream Dependents (Waiting for This Release)

| Dependent | BRS | Phase | Waiting For |
|-----------|-----|-------|-------------|
| Admin App | 2.3 | Phase 3a | Instance provisioning APIs |
| Admin Portal | 2.4 | Phase 3b | Instance monitoring APIs |

---

## 4. SDLC Stage Tracking

### Backend Track (10 Stages)

| Stage | Name | Status | Progress | Start Date | End Date |
|-------|------|--------|----------|------------|----------|
| 1 | Requirements & Analysis | COMPLETE | 100% | 2026-01-14 | 2026-01-15 |
| 2 | HLD Creation | COMPLETE | 100% | 2026-01-15 | 2026-01-16 |
| 3 | LLD Creation | COMPLETE | 100% | 2026-01-16 | 2026-01-17 |
| 4 | API Tests (TDD) | COMPLETE | 100% | 2026-01-17 | 2026-01-18 |
| 5 | API Implementation | COMPLETE | 100% | 2026-01-18 | 2026-01-18 |
| 6 | API Proxy | COMPLETE | 100% | 2026-01-18 | 2026-01-18 |
| 7 | Infrastructure (Terraform) | COMPLETE | 100% | 2026-01-18 | 2026-01-18 |
| 8 | CI/CD Pipeline | COMPLETE | 100% | 2026-01-18 | 2026-01-18 |
| 9 | Route53/Domain | PENDING | 0% | ___ | ___ |
| 10 | Deploy & Test | COMPLETE | 100% | 2026-01-18 | 2026-01-18 |

---

## 5. Validation Gates

| Gate | Name | Approvers | Criteria | Status |
|------|------|-----------|----------|--------|
| G1 | Design Approval | Tech Lead, Architect | HLD + LLD reviewed | APPROVED |
| G2 | Code Review | Tech Lead | Tests + code reviewed | APPROVED |
| G3 | Infrastructure Review | DevOps Lead | Terraform validated | APPROVED |
| G4 | Production Ready | Tech Lead, PM | All tests passing | PENDING |

---

## 6. Deliverables Checklist

| # | Deliverable | Status | Verified By | Date |
|---|-------------|--------|-------------|------|
| 1 | `HLDs/2.7_HLD_Instance_Management.md` - Approved | COMPLETE | Architect | 2026-01-16 |
| 2 | `LLDs/2.7_LLD_Instance_Management.md` - Approved | COMPLETE | Architect | 2026-01-17 |
| 3 | `2_bbws_tenants_instances_lambda/` repository | COMPLETE | Dev Team | 2026-01-18 |
| 4 | DynamoDB State Table | COMPLETE | DevOps | 2026-01-18 |
| 5 | Lambda-orchestrated provisioning | COMPLETE | Dev Team | 2026-01-18 |
| 6 | CloudWatch monitoring | IN_PROGRESS | DevOps | ___ |
| 7 | ECS/EFS/RDS automation | COMPLETE | DevOps | 2026-01-18 |
| 8 | Terraform modules | COMPLETE | DevOps | 2026-01-18 |
| 9 | CI/CD pipelines | COMPLETE | DevOps | 2026-01-18 |
| 10 | Unit tests - >80% coverage | PENDING | ___ | ___ |
| 11 | Integration tests | PENDING | ___ | ___ |

---

## 7. Definition of Done

| # | Criteria | Status |
|---|----------|--------|
| 1 | All SDLC stages (1-10) completed | IN_PROGRESS |
| 2 | All validation gates approved | PENDING |
| 3 | Tenant provisioning < 15 minutes (automated) | PENDING |
| 4 | DynamoDB state tracking operational | COMPLETE |
| 5 | Cross-account AssumeRole working (DEV/SIT/PROD) | PENDING |
| 6 | Health checks operational | PENDING |
| 7 | DEV environment deployment successful | COMPLETE |
| 8 | SIT environment deployment successful | PENDING |
| 9 | UAT completed with sign-off | PENDING |
| 10 | PROD deployment approved | PENDING |
| 11 | Monitoring dashboards configured | PENDING |
| 12 | CloudWatch alarms for stuck/failed operations | PENDING |

---

## 8. Environment Deployments

| Environment | Region | Lambda Function | API Gateway | Status |
|-------------|--------|-----------------|-------------|--------|
| DEV | eu-west-1 | bbws-tenant-instance-management-dev | o158f3j653 | DEPLOYED |
| SIT | af-south-1 | bbws-tenant-instance-management-sit | ___ | PENDING |
| PROD | af-south-1 | bbws-tenant-instance-management-prod | ___ | PENDING |

---

## 9. API Endpoints

| Method | Endpoint | Description | Status |
|--------|----------|-------------|--------|
| POST | `/instances` | Create new instance | DEPLOYED |
| GET | `/instances/{id}` | Get instance details | DEPLOYED |
| GET | `/instances` | List all instances | DEPLOYED |
| PUT | `/instances/{id}` | Update instance | DEPLOYED |
| DELETE | `/instances/{id}` | Terminate instance | DEPLOYED |
| POST | `/instances/{id}/health` | Health check | PENDING |
| POST | `/instances/{id}/restart` | Restart instance | PENDING |

---

## 10. Risk Register

| Risk | Impact | Probability | Mitigation | Status |
|------|--------|-------------|------------|--------|
| Provisioning failures | HIGH | MEDIUM | DynamoDB state tracking + retries | MITIGATED |
| Cross-account IAM issues | MEDIUM | MEDIUM | AssumeRole verification | OPEN |
| Resource contention | LOW | LOW | ECS capacity planning | MITIGATED |

---

## 11. Sign-Off

| Role | Name | Date | Signature |
|------|------|------|-----------|
| Product Owner | | | |
| Tech Lead | | | |
| DevOps Lead | | | |
| Business Owner | | | |

---

*This release is part of Phase 1a (Core APIs) and depends on R1.0 (Tenant Management API).*
