# Release Plan: R1.0.1 - Access Management
## Phase 0: Foundation Layer (Dependency)

**Document ID**: RP-R1.0.1-ACCESS-MGMT
**Version**: 1.1
**Created**: 2026-01-25
**Updated**: 2026-01-25
**Status**: DEV DEPLOYED
**Priority**: P0 - CRITICAL (Dependency)

---

## Release Summary

| Attribute | Value |
|-----------|-------|
| **Release #** | R1.0.1 |
| **BRS Reference** | BRS 2.8 |
| **Phase** | Phase 0 - Foundation (Dependency) |
| **SDLC Track** | Backend (10 stages) |
| **Depends On** | R1.0 (Tenant Management API) |
| **DEV Deployed** | 2026-01-25 |
| **Target SIT Date** | _______________ |
| **Target PROD Date** | _______________ |
| **Business Owner** | _______________ |

---

## DEV Deployment Summary

| Resource | Name/Value | Status |
|----------|------------|--------|
| **API Gateway URL** | `https://rfls9533a1.execute-api.eu-west-1.amazonaws.com/dev` | ✅ Live |
| **Health Endpoint** | `/v1/health` | ✅ Passing |
| **DynamoDB Table** | `bbws-access-dev-ddb-access-management` | ✅ Created |
| **S3 Audit Bucket** | `bbws-access-dev-s3-audit-archive` | ✅ Created |
| **Lambda Functions** | 13 deployed | ✅ Created |
| **IAM Roles** | 6 service roles | ✅ Created |
| **CloudWatch Dashboard** | `bbws-access-dev-dashboard` | ✅ Created |
| **SNS Topics** | 4 alert topics | ✅ Created |
| **Total Resources** | 119 | ✅ Created |

---

## 1. Release Objective

Implement the **Access Management** system that provides Role-Based Access Control (RBAC), permission management, team hierarchy, invitation services, and audit logging across the BBWS platform.

### Key Capabilities
- Permission service (CRUD operations on permissions)
- Role service (role definitions and assignments)
- Team service (team hierarchy management)
- Invitation service (user invitations)
- Authorizer service (Lambda authorizer for API Gateway)
- Audit service (audit logging)

---

## 2. LLD Components

### From BRS 2.8 Access Management

| LLD | Service | Priority | Status |
|-----|---------|----------|--------|
| 2.8.1 | Permission Service | P0 | ✅ COMPLETE |
| 2.8.2 | Invitation Service | P0 | ✅ COMPLETE |
| 2.8.3 | Team Service | P0 | ✅ COMPLETE |
| 2.8.4 | Role Service | P0 | ✅ COMPLETE |
| 2.8.5 | Authorizer Service | P0 | ✅ COMPLETE |
| 2.8.6 | Audit Service | P0 | ✅ COMPLETE |

---

## 3. User Stories Included

| Story ID | User Story | Priority | Status |
|----------|-----------|----------|--------|
| AM-001 | Define permissions for resources | P0 | ✅ DEV |
| AM-002 | Create and assign roles | P0 | ✅ DEV |
| AM-003 | Manage team hierarchy | P0 | ✅ DEV |
| AM-004 | Send user invitations | P0 | ✅ DEV |
| AM-005 | Accept/decline invitations | P0 | ✅ DEV |
| AM-006 | Authorize API requests | P0 | ✅ DEV |
| AM-007 | Log audit events | P0 | ✅ DEV |
| AM-008 | Query audit history | P1 | ✅ DEV |
| AM-009 | Enforce permission checks | P0 | ✅ DEV |
| AM-010 | Manage role inheritance | P1 | ✅ DEV |

---

## 4. Dependencies

### Upstream Dependencies

| Dependency | Type | Status | Owner |
|------------|------|--------|-------|
| R1.0 Tenant Management API | Release | ✅ COMPLETE | API Team |
| Cognito User Pools | Infrastructure | ✅ COMPLETE | DevOps |
| DynamoDB Tables | Infrastructure | ✅ COMPLETE | DevOps |

### Downstream Dependents

| Dependent | BRS | Phase | Waiting For |
|-----------|-----|-------|-------------|
| Customer Portal | 2.2 | Phase 2 | Authorizer + Invitation |
| Admin App | 2.3 | Phase 3a | All services |
| Admin Portal | 2.4 | Phase 3b | All services |

---

## 5. Deliverables Checklist

| # | Deliverable | Status | Verified By | Date |
|---|-------------|--------|-------------|------|
| 1 | `HLDs/2.8_HLD_Access_Management.md` | ✅ COMPLETE | Architect | 2026-01-24 |
| 2 | `LLDs/2.8.1_LLD_Permission_Service.md` | ✅ COMPLETE | Architect | 2026-01-25 |
| 3 | `LLDs/2.8.2_LLD_Invitation_Service.md` | ✅ COMPLETE | Architect | 2026-01-25 |
| 4 | `LLDs/2.8.3_LLD_Team_Service.md` | ✅ COMPLETE | Architect | 2026-01-25 |
| 5 | `LLDs/2.8.4_LLD_Role_Service.md` | ✅ COMPLETE | Architect | 2026-01-25 |
| 6 | `LLDs/2.8.5_LLD_Authorizer_Service.md` | ✅ COMPLETE | Architect | 2026-01-25 |
| 7 | `LLDs/2.8.6_LLD_Audit_Service.md` | ✅ COMPLETE | Architect | 2026-01-25 |
| 8 | Lambda implementations | ✅ DEV DEPLOYED | DevOps | 2026-01-25 |
| 9 | DynamoDB tables | ✅ DEV DEPLOYED | DevOps | 2026-01-25 |
| 10 | API Gateway integration | ✅ DEV DEPLOYED | DevOps | 2026-01-25 |
| 11 | Unit tests - >80% coverage | ⏳ IN PROGRESS | QA | ___ |
| 12 | Integration tests | ⏳ PENDING | QA | ___ |

---

## 6. DEV Environment Details

### Infrastructure Created (119 resources)

| Category | Resources | Count |
|----------|-----------|-------|
| DynamoDB | Table + 5 GSIs | 1 |
| S3 | Audit archive bucket | 1 |
| IAM | Service roles + policies | 6 |
| Lambda | Functions | 13 |
| CloudWatch | Log groups | 42 |
| API Gateway | REST API + endpoints | 1 |
| SNS | Alert topics | 4 |
| CloudWatch | Alarms + Dashboard | 3 |

### Lambda Functions Deployed

| Service | Function Name | Status |
|---------|---------------|--------|
| Permission | bbws-access-dev-permission-list | ✅ |
| Permission | bbws-access-dev-permission-get | ✅ |
| Permission | bbws-access-dev-permission-set-list | ✅ |
| Permission | bbws-access-dev-permission-set-create | ✅ |
| Invitation | bbws-access-dev-invitation-list | ✅ |
| Invitation | bbws-access-dev-invitation-create | ✅ |
| Invitation | bbws-access-dev-invitation-accept | ✅ |
| Team | bbws-access-dev-team-list | ✅ |
| Team | bbws-access-dev-team-create | ✅ |
| Team | bbws-access-dev-team-get | ✅ |
| Audit | bbws-access-dev-audit-access-logs | ✅ |
| Audit | bbws-access-dev-audit-export | ✅ |
| Authorizer | bbws-access-dev-authorizer | ✅ |

### API Endpoints

| Method | Endpoint | Lambda | Auth |
|--------|----------|--------|------|
| GET | `/v1/health` | Mock | None |
| GET | `/v1/platform/permissions` | permission-list | JWT |
| GET | `/v1/organisations/{orgId}/teams` | team-list | JWT |
| POST | `/v1/organisations/{orgId}/teams` | team-create | JWT |

---

## 7. Definition of Done

| # | Criteria | Status |
|---|----------|--------|
| 1 | All LLDs completed and approved | ✅ COMPLETE |
| 2 | All Lambda functions deployed | ✅ DEV COMPLETE |
| 3 | DynamoDB tables operational | ✅ DEV COMPLETE |
| 4 | Authorizer integrated with API Gateway | ✅ DEV COMPLETE |
| 5 | Audit logging operational | ✅ DEV COMPLETE |
| 6 | DEV environment deployment | ✅ COMPLETE (2026-01-25) |
| 7 | SIT environment deployment | ⏳ PENDING |
| 8 | UAT completed with sign-off | ⏳ PENDING |

---

## 8. Next Steps

| # | Action | Owner | Target Date |
|---|--------|-------|-------------|
| 1 | Complete unit tests (>80% coverage) | QA | ___ |
| 2 | Run integration tests | QA | ___ |
| 3 | Promote to SIT environment | DevOps | ___ |
| 4 | SIT testing and validation | QA | ___ |
| 5 | UAT sign-off | Business | ___ |
| 6 | Promote to PROD | DevOps | ___ |

---

## 9. Sign-Off

| Role | Name | Date | Signature |
|------|------|------|-----------|
| Product Owner | | | |
| Tech Lead | | | |
| Security Lead | | | |
| Business Owner | | | |

---

## 10. Change History

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | 2026-01-25 | Architect | Initial release plan |
| 1.1 | 2026-01-25 | DevOps | DEV deployment completed |

---

*This is a dependency release for Phase 0 Foundation, supporting R1.0 (Tenant Management API).*
