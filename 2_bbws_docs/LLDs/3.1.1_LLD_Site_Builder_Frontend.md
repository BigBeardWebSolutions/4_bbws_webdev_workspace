# Site Builder Frontend Architecture - Low-Level Design

**Version**: 1.1
**Created**: 2026-01-15
**Updated**: 2026-01-16
**Status**: Draft
**Component**: Site Builder UI (3_site_builder)
**Parent HLD**: [BBWS AI-Powered Site Builder HLD](../HLDs/BBSW_Site_Builder_HLD_v3.md)
**Parent BRS**: [BBWS AI-Powered Site Builder BRS](../BRS/BBWS_Site_Builder_BRS_v1.md)

---

## Document Control

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | 2026-01-15 | Agentic Architect | Initial version |
| 1.1 | 2026-01-16 | Claude Opus 4.5 | Added Epic 6 (Site Designer: US-022, US-023, US-024) and Epic 9 (White-Label & Marketplace: US-025 to US-028), Partner Portal screens (5.6-5.10), Partner data models, Partner API endpoints |

---

## Table of Contents

1. [Introduction](#1-introduction)
2. [Technology Stack & Libraries](#2-technology-stack--libraries)
3. [User Journey](#3-user-journey)
4. [UI Component Diagram](#4-ui-component-diagram)
5. [Screens](#5-screens)
6. [Screen Rules](#6-screen-rules)
7. [Sequence Diagrams](#7-sequence-diagrams)
8. [Dependency APIs](#8-dependency-apis)
9. [High Level Epic Overview](#9-high-level-epic-overview)
10. [Data Models](#10-data-models)
11. [AI Agent Integration](#11-ai-agent-integration)
12. [State Management](#12-state-management)
13. [NFRs](#13-nfrs)
14. [Security](#14-security)
15. [References](#15-references)

---

## 1. Introduction

### 1.1 Purpose

This LLD provides implementation-level details for the Site Builder Frontend application, a React Single Page Application (SPA) that enables non-technical users to generate landing pages through conversational AI interaction.

### 1.2 Component Overview

| Attribute | Value |
|-----------|-------|
| Repository | `3_site_builder` |
| Technology | React 18, TypeScript, Vite |
| State Management | React Context + useReducer |
| Styling | Tailwind CSS |
| API Client | Native Fetch API with React Query |
| Testing | Vitest, React Testing Library |
| Real-time | Server-Sent Events (SSE) for streaming |

### 1.3 Entry Point

Users access the Site Builder after completing payment on the `/buy` checkout flow:

```
/buy (Pricing) â†’ /buy/checkout â†’ PayFast â†’ /buy/payment/success â†’ /page_builder
```

---

## 2. Technology Stack & Libraries

### 2.1 Production Dependencies

| Library | Version | Purpose |
|---------|---------|---------|
| react | ^18.3.1 | Core UI framework |
| react-dom | ^18.3.1 | React DOM rendering |
| react-router-dom | ^7.x | Client-side routing |
| @tanstack/react-query | ^5.x | Server state management, caching |
| tailwindcss | ^3.4.x | Utility-first CSS framework |
| lucide-react | ^0.x | Icon library |
| framer-motion | ^11.x | Animations |
| react-markdown | ^9.x | Markdown rendering for AI responses |
| highlight.js | ^11.x | Code syntax highlighting |

### 2.2 Development Dependencies

| Library | Version | Purpose |
|---------|---------|---------|
| vite | ^5.4.x | Build tool and dev server |
| typescript | ^5.x | Type safety |
| vitest | ^4.x | Unit testing framework |
| @testing-library/react | ^16.x | React component testing |
| eslint | ^9.x | Code linting |
| prettier | ^3.x | Code formatting |

### 2.3 Node.js Requirements

| Requirement | Minimum Version |
|-------------|-----------------|
| Node.js | >= 20.0.0 |
| npm | >= 10.0.0 |

---

## 3. User Journey

### 3.1 Primary User Flow

```mermaid
flowchart LR
    A[Payment Success] --> B[Page Builder Entry]
    B --> C{First Time?}
    C -->|Yes| D[Onboarding Tour]
    C -->|No| E[Dashboard]
    D --> E
    E --> F[Create New Site]
    F --> G[Conversational AI]
    G --> H[Generate Preview]
    H --> I{Satisfied?}
    I -->|No| J[Refine with AI]
    J --> H
    I -->|Yes| K[Validation]
    K --> L{Score >= 8?}
    L -->|No| M[Fix Issues]
    M --> G
    L -->|Yes| N[Deploy to Staging]
    N --> O[Review]
    O --> P[Deploy to Production]
```

### 3.2 User Personas

| Persona | Primary Actions | Key Needs |
|---------|-----------------|-----------|
| Marketing Manager | Generate landing pages quickly | Speed, simplicity, brand consistency |
| Content Strategist | Refine content, ensure brand voice | Templates, tone control, version history |
| Designer | Visual customization | Theme control, layout options, preview |
| Brand Manager | Approve deployments | Brand scoring, validation reports |

---

## 4. UI Component Diagram

### 4.1 Application Shell

```mermaid
graph TD
    subgraph AppShell["App Shell"]
        subgraph Header["Header Bar"]
            Logo[Logo]
            ProjectName[Project Name]
            EnvBadge[Environment Badge]
            UserMenu[User Menu]
        end

        subgraph MainContent["Main Content Area"]
            subgraph Sidebar["Left Sidebar (280px)"]
                NavMenu[Navigation Menu]
                AgentsList[AI Agents List]
                RecentProjects[Recent Projects]
            end

            subgraph WorkArea["Work Area"]
                subgraph TopBar["Action Bar"]
                    ViewToggle[View Toggle]
                    DevicePreview[Device Preview]
                    DeployBtn[Deploy Button]
                end

                subgraph SplitView["Split View"]
                    ChatPanel[Chat Panel - 40%]
                    PreviewPanel[Preview Panel - 60%]
                end
            end
        end

        subgraph StatusBar["Status Bar"]
            BrandScore[Brand Score]
            SaveStatus[Save Status]
            ConnectionStatus[Connection]
        end
    end
```

### 4.2 Component Hierarchy

```
src/
â”œâ”€â”€ App.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ AppShell.tsx
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ StatusBar.tsx
â”‚   â”‚   â””â”€â”€ SplitPane.tsx
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ ChatPanel.tsx
â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx
â”‚   â”‚   â”œâ”€â”€ ChatInput.tsx
â”‚   â”‚   â”œâ”€â”€ StreamingMessage.tsx
â”‚   â”‚   â””â”€â”€ SuggestionChips.tsx
â”‚   â”œâ”€â”€ preview/
â”‚   â”‚   â”œâ”€â”€ PreviewPanel.tsx
â”‚   â”‚   â”œâ”€â”€ PreviewFrame.tsx
â”‚   â”‚   â”œâ”€â”€ DeviceSelector.tsx
â”‚   â”‚   â””â”€â”€ PreviewToolbar.tsx
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ AgentCard.tsx
â”‚   â”‚   â”œâ”€â”€ AgentPanel.tsx
â”‚   â”‚   â”œâ”€â”€ LogoCreator.tsx
â”‚   â”‚   â”œâ”€â”€ ThemeSelector.tsx
â”‚   â”‚   â”œâ”€â”€ LayoutEditor.tsx
â”‚   â”‚   â””â”€â”€ BackgroundGenerator.tsx
â”‚   â”œâ”€â”€ validation/
â”‚   â”‚   â”œâ”€â”€ BrandScoreCard.tsx
â”‚   â”‚   â”œâ”€â”€ ValidationReport.tsx
â”‚   â”‚   â””â”€â”€ SecurityScanResult.tsx
â”‚   â”œâ”€â”€ deployment/
â”‚   â”‚   â”œâ”€â”€ DeploymentModal.tsx
â”‚   â”‚   â”œâ”€â”€ EnvironmentSelector.tsx
â”‚   â”‚   â””â”€â”€ DeploymentHistory.tsx
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”œâ”€â”€ Badge.tsx
â”‚   â”‚   â”œâ”€â”€ Spinner.tsx
â”‚   â”‚   â””â”€â”€ Toast.tsx
â”‚   â””â”€â”€ onboarding/
â”‚       â”œâ”€â”€ OnboardingTour.tsx
â”‚       â”œâ”€â”€ TourStep.tsx
â”‚       â””â”€â”€ WelcomeModal.tsx
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ DashboardPage.tsx
â”‚   â”œâ”€â”€ BuilderPage.tsx
â”‚   â”œâ”€â”€ SettingsPage.tsx
â”‚   â”œâ”€â”€ TemplatesPage.tsx
â”‚   â””â”€â”€ HistoryPage.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useChat.ts
â”‚   â”œâ”€â”€ usePreview.ts
â”‚   â”œâ”€â”€ useAgents.ts
â”‚   â”œâ”€â”€ useDeployment.ts
â”‚   â””â”€â”€ useBrandScore.ts
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ siteApi.ts
â”‚   â”œâ”€â”€ generationApi.ts
â”‚   â”œâ”€â”€ agentApi.ts
â”‚   â”œâ”€â”€ deploymentApi.ts
â”‚   â””â”€â”€ validationApi.ts
â”œâ”€â”€ context/
â”‚   â”œâ”€â”€ AuthContext.tsx
â”‚   â”œâ”€â”€ ProjectContext.tsx
â”‚   â””â”€â”€ ThemeContext.tsx
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts
â””â”€â”€ utils/
    â”œâ”€â”€ markdown.ts
    â””â”€â”€ validation.ts
```

---

## 5. Screens

### 5.1 Dashboard Screen

**Route**: `/page_builder`

**Purpose**: Central hub showing recent projects, quick actions, and AI agent access.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] Site Builder                    DEV â”‚ [?] [Settings] [Avatar] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Welcome back, Tebogo!                                                 â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  [+] Create New Landing Page                                     â”‚  â”‚
â”‚  â”‚      Start with AI or choose a template                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  Recent Projects                                        [View All â†’]   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ [Preview]    â”‚ â”‚ [Preview]    â”‚ â”‚ [Preview]    â”‚                   â”‚
â”‚  â”‚ Summer Sale  â”‚ â”‚ Product Launchâ”‚ â”‚ Newsletter   â”‚                   â”‚
â”‚  â”‚ Draft â€¢ 2h   â”‚ â”‚ Live â€¢ 1d    â”‚ â”‚ Draft â€¢ 3d   â”‚                   â”‚
â”‚  â”‚ Score: 8.5   â”‚ â”‚ Score: 9.2   â”‚ â”‚ Score: 7.8   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                        â”‚
â”‚  AI Design Agents                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Logo â”‚ â”‚ BG   â”‚ â”‚Theme â”‚ â”‚Layoutâ”‚ â”‚ Blog â”‚ â”‚News- â”‚ â”‚Outlineâ”‚     â”‚
â”‚  â”‚      â”‚ â”‚ Imageâ”‚ â”‚      â”‚ â”‚      â”‚ â”‚      â”‚ â”‚letterâ”‚ â”‚      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                        â”‚
â”‚  Templates                                              [Browse All â†’] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ SaaS Landing â”‚ â”‚ E-commerce   â”‚ â”‚ Event Page   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Brand Score: 8.5/10  â”‚  Auto-saved  â”‚  â— Connected                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.2 Builder Screen (Main Workspace)

**Route**: `/page_builder/project/:projectId`

**Purpose**: Primary workspace for AI-driven page generation with split-view interface.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] Site Builder    Summer Sale Campaign    DEV â”‚ [Deploy â–¼] [â˜°]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        â”‚  [Chat] [Agents] [History]          [Desktop] [Tablet] [Mobile]â”‚
â”‚  Nav   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        â”‚                               â”‚                               â”‚
â”‚ â–¡ Dash â”‚  AI Assistant                 â”‚  Live Preview                 â”‚
â”‚ â–¡ Buildâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â–¡ Templâ”‚                               â”‚  â”‚                         â”‚ â”‚
â”‚ â–¡ Hist â”‚  ğŸ¤– Hi! I'll help you create  â”‚  â”‚    [Hero Section]       â”‚ â”‚
â”‚        â”‚     your landing page.        â”‚  â”‚                         â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€  â”‚     What would you like       â”‚  â”‚    Your Summer Sale     â”‚ â”‚
â”‚ Agents â”‚     to build today?           â”‚  â”‚    Headline Here        â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€  â”‚                               â”‚  â”‚                         â”‚ â”‚
â”‚ â—‰ Logo â”‚  ğŸ’¡ Suggestions:              â”‚  â”‚    [CTA Button]         â”‚ â”‚
â”‚ â—‰ BG   â”‚  â€¢ Product launch page        â”‚  â”‚                         â”‚ â”‚
â”‚ â—‰ Themeâ”‚  â€¢ Summer sale campaign       â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚ â—‰ Layoutâ”‚  â€¢ Newsletter signup         â”‚  â”‚                         â”‚ â”‚
â”‚ â—‰ Blog â”‚                               â”‚  â”‚    [Features Grid]      â”‚ â”‚
â”‚ â—‰ News â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚                         â”‚ â”‚
â”‚        â”‚                               â”‚  â”‚    â–¡ â–¡ â–¡                â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€  â”‚  ğŸ‘¤ Create a summer sale      â”‚  â”‚                         â”‚ â”‚
â”‚ Recent â”‚     landing page with hero,   â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€  â”‚     3 product highlights,     â”‚  â”‚                         â”‚ â”‚
â”‚ â€¢ Proj1â”‚     and newsletter signup     â”‚  â”‚    [Newsletter Form]    â”‚ â”‚
â”‚ â€¢ Proj2â”‚                               â”‚  â”‚                         â”‚ â”‚
â”‚        â”‚  ğŸ¤– Great! I'll create that   â”‚  â”‚    [Footer]             â”‚ â”‚
â”‚        â”‚     for you. Generating...    â”‚  â”‚                         â”‚ â”‚
â”‚        â”‚     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚                               â”‚                               â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        â”‚  [Type your message or describe what you want...]      [Send] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Brand: 8.5/10 [â–²0.3]  â”‚  Saving...  â”‚  â— Connected â”‚ v3 of 5        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.3 Agent Panel (Modal/Slide-over)

**Trigger**: Click on any AI Agent in sidebar

**Purpose**: Dedicated interface for specific design agents.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Logo Creator Agent                                    [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Describe your logo requirements:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Modern tech company logo with abstract geometric    â”‚   â”‚
â”‚  â”‚ shapes, using brand colors blue and white           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Style:  [Modern â–¼]   Colors: [Brand â–¼]   Shape: [Any â–¼]   â”‚
â”‚                                                             â”‚
â”‚  [Generate Logos]                                           â”‚
â”‚                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                             â”‚
â”‚  Generated Options (4)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  [L1]   â”‚ â”‚  [L2]   â”‚ â”‚  [L3]   â”‚ â”‚  [L4]   â”‚          â”‚
â”‚  â”‚         â”‚ â”‚         â”‚ â”‚         â”‚ â”‚         â”‚          â”‚
â”‚  â”‚ â—‹ Selectâ”‚ â”‚ â— Selectâ”‚ â”‚ â—‹ Selectâ”‚ â”‚ â—‹ Selectâ”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                             â”‚
â”‚  [Regenerate]                          [Apply to Page]      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.4 Deployment Screen (Modal)

**Trigger**: Click Deploy button

**Purpose**: Multi-environment deployment workflow.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Deploy "Summer Sale Campaign"                         [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Pre-deployment Validation                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  âœ… Brand Score: 8.5/10 (Minimum: 8.0)                      â”‚
â”‚  âœ… Security Scan: Passed                                   â”‚
â”‚  âœ… Performance: Load time 1.2s (Max: 3s)                   â”‚
â”‚  âœ… Accessibility: WCAG 2.1 AA Compliant                    â”‚
â”‚                                                             â”‚
â”‚  Select Environment                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   â—‹ Staging      â”‚ â”‚   â—‹ Production   â”‚                 â”‚
â”‚  â”‚   Preview & Test â”‚ â”‚   Go Live        â”‚                 â”‚
â”‚  â”‚   [Recommended]  â”‚ â”‚   Requires 8.0+  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                             â”‚
â”‚  Custom Domain (Optional)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ summer-sale.mybrand.com                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                             â”‚
â”‚  [Cancel]                              [Deploy to Staging]  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.5 Version History Screen

**Route**: `/page_builder/project/:projectId/history`

**Purpose**: View and restore previous versions.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Version History - Summer Sale Campaign                          [Ã—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Current Version: v5                                                   â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Version â”‚ Changes                          â”‚ Time    â”‚ Actions   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ v5 â—    â”‚ Updated hero headline           â”‚ 2m ago  â”‚ [Current] â”‚  â”‚
â”‚  â”‚ v4      â”‚ Changed color theme to Ocean    â”‚ 15m ago â”‚ [Restore] â”‚  â”‚
â”‚  â”‚ v3      â”‚ Added testimonials section      â”‚ 1h ago  â”‚ [Restore] â”‚  â”‚
â”‚  â”‚ v2      â”‚ Regenerated product grid        â”‚ 2h ago  â”‚ [Restore] â”‚  â”‚
â”‚  â”‚ v1      â”‚ Initial generation              â”‚ 3h ago  â”‚ [Restore] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  Preview Comparison                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ v5 (Current)          â”‚ vs â”‚ v4 (Selected)         â”‚               â”‚
â”‚  â”‚                       â”‚    â”‚                       â”‚               â”‚
â”‚  â”‚ [Preview]             â”‚    â”‚ [Preview]             â”‚               â”‚
â”‚  â”‚                       â”‚    â”‚                       â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.6 Partner Portal Dashboard (Epic 9)

**Route**: `/partner`

**Purpose**: Central hub for white-label partners to manage branding, sub-tenants, and billing.

**Access**: White-Label Partner persona only (requires `partner_admin` role)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Partner Logo] Partner Portal                    â”‚ [?] [Settings] [ğŸ‘¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Welcome, Acme Partner!                              Plan: Premium     â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Sub-Tenants      â”‚ â”‚ Generations      â”‚ â”‚ Monthly Bill     â”‚       â”‚
â”‚  â”‚     12 / 50      â”‚ â”‚   3,450 / 5,000  â”‚ â”‚   R 24,500       â”‚       â”‚
â”‚  â”‚ [Manage â†’]       â”‚ â”‚ [View Usage â†’]   â”‚ â”‚ [View Invoice â†’] â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                        â”‚
â”‚  Quick Actions                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ + Add    â”‚ â”‚ Update   â”‚ â”‚ Manage   â”‚ â”‚ Export   â”‚                 â”‚
â”‚  â”‚ Tenant   â”‚ â”‚ Branding â”‚ â”‚ Admins   â”‚ â”‚ Reports  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                        â”‚
â”‚  Recent Sub-Tenants                                    [View All â†’]    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Name            â”‚ Status  â”‚ Sites â”‚ Usage This Month â”‚ Plan   â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ TechCorp Ltd    â”‚ Active  â”‚  5    â”‚ 245 generations  â”‚ Std    â”‚    â”‚
â”‚  â”‚ StartupXYZ      â”‚ Active  â”‚  3    â”‚ 123 generations  â”‚ Free   â”‚    â”‚
â”‚  â”‚ RetailMax       â”‚ Pending â”‚  0    â”‚ -                â”‚ Prem   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                        â”‚
â”‚  Usage Alerts                                                          â”‚
â”‚  âš ï¸ Usage at 69% of monthly limit (3,450 / 5,000 generations)         â”‚
â”‚                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Partner ID: ptn_abc123  â”‚  Custom Domain: builder.acmepartner.com    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.7 Partner Branding Configuration (Epic 9 - US-025)

**Route**: `/partner/branding`

**Purpose**: Configure white-label branding including logo, colors, and custom domain.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†] Partner Portal    Branding Configuration                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Brand Identity                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Logo                          â”‚  Favicon                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚           â”‚  â”‚      â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚  [Partner Logo] â”‚           â”‚  â”‚ [Fav]â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚           â”‚  â”‚      â”‚                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â””â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚
â”‚  â”‚  [Upload New Logo]             â”‚  [Upload Favicon]              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  Colors                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Primary Color         â”‚  Secondary Color                       â”‚  â”‚
â”‚  â”‚  [â– ] #1E3A5F           â”‚  [â– ] #F5A623                           â”‚  â”‚
â”‚  â”‚  [Color Picker]        â”‚  [Color Picker]                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  Company Details                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Company Name: [Acme Partner                                  ] â”‚  â”‚
â”‚  â”‚  Support Email: [support@acmepartner.com                      ] â”‚  â”‚
â”‚  â”‚  Footer Text: [Powered by Acme Partner                        ] â”‚  â”‚
â”‚  â”‚  â–¡ Hide "Powered by BBWS" badge                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  Custom Domain                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Domain: [builder.acmepartner.com                             ] â”‚  â”‚
â”‚  â”‚  Status: â— Verified (SSL Active)                                â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  DNS Records Required:                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Type  â”‚ Name                    â”‚ Value                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ CNAME â”‚ builder.acmepartner.com â”‚ partner.bbws.io        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ TXT   â”‚ _verify.acmepartner.com â”‚ bbws-verify=abc123     â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚  [Verify Domain]                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  Preview                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  [Live preview of partner-branded interface]                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  [Cancel]                                              [Save Changes]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.8 Partner Sub-Tenant Management (Epic 9 - US-026)

**Route**: `/partner/tenants`

**Purpose**: Create, view, and manage sub-tenants under the partner account.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†] Partner Portal    Sub-Tenant Management          [+ Add Tenant]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Sub-Tenants (12 / 50)                              [Search...] [Filter]â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Name           â”‚ Status â”‚ Admin Email        â”‚ Sitesâ”‚ Usage â”‚Plan â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ TechCorp Ltd   â”‚â—Active â”‚ admin@techcorp.com â”‚  5   â”‚ 245   â”‚ Std â”‚â”‚
â”‚  â”‚ StartupXYZ     â”‚â—Active â”‚ ceo@startupxyz.com â”‚  3   â”‚ 123   â”‚ Freeâ”‚â”‚
â”‚  â”‚ RetailMax      â”‚â—‹Pendingâ”‚ ops@retailmax.com  â”‚  0   â”‚ -     â”‚ Premâ”‚â”‚
â”‚  â”‚ MediaGroup     â”‚â—Active â”‚ it@mediagroup.co   â”‚  8   â”‚ 567   â”‚ Std â”‚â”‚
â”‚  â”‚ FinanceHub     â”‚âŠ˜Suspnd â”‚ admin@finhub.com   â”‚  2   â”‚ 89    â”‚ Std â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                        â”‚
â”‚  â”‚ â† â”‚ Page 1 of 3 â”‚ â†’ â”‚                                              â”‚
â”‚                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Selected: TechCorp Ltd                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Tenant Details                                                  â”‚  â”‚
â”‚  â”‚  ID: ten_xyz789                     Created: 2025-06-15          â”‚  â”‚
â”‚  â”‚  Admin: admin@techcorp.com          Plan: Standard               â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  Usage This Month                                                 â”‚  â”‚
â”‚  â”‚  â€¢ Generations: 245 / 500                                        â”‚  â”‚
â”‚  â”‚  â€¢ Sites: 5                                                       â”‚  â”‚
â”‚  â”‚  â€¢ Storage: 1.2 GB                                                â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  [View Details] [Edit Plan] [Suspend] [Delete]                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Add Tenant Modal**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create New Sub-Tenant                                            [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Organisation Name *                                                   â”‚
â”‚  [                                                                  ]  â”‚
â”‚                                                                        â”‚
â”‚  Admin Email *                                                         â”‚
â”‚  [                                                                  ]  â”‚
â”‚                                                                        â”‚
â”‚  Subscription Plan                                                     â”‚
â”‚  â—‹ Free (50 generations/month)                                         â”‚
â”‚  â— Standard (500 generations/month)                                    â”‚
â”‚  â—‹ Premium (5,000 generations/month)                                   â”‚
â”‚                                                                        â”‚
â”‚  â„¹ï¸ An invitation email will be sent to the admin email address.       â”‚
â”‚                                                                        â”‚
â”‚  [Cancel]                                           [Create Tenant]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.9 Partner Subscription Management (Epic 9 - US-027)

**Route**: `/partner/subscription`

**Purpose**: View and manage marketplace subscription, upgrade/downgrade plans.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†] Partner Portal    Subscription Management                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Current Plan                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â˜… PREMIUM                                        R 2,999/month  â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  â€¢ Up to 50 sub-tenants                                          â”‚  â”‚
â”‚  â”‚  â€¢ 5,000 generations/month                                        â”‚  â”‚
â”‚  â”‚  â€¢ 50 GB storage                                                  â”‚  â”‚
â”‚  â”‚  â€¢ Custom domain                                                  â”‚  â”‚
â”‚  â”‚  â€¢ White-label branding                                           â”‚  â”‚
â”‚  â”‚  â€¢ Priority support                                               â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  Billing Period: Monthly                                          â”‚  â”‚
â”‚  â”‚  Next Renewal: 2026-02-01                                         â”‚  â”‚
â”‚  â”‚  Marketplace ID: mkt_abc123                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  Usage This Period (Jan 1 - Jan 31, 2026)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Generations     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  3,450 / 5,000 (69%)    â”‚  â”‚
â”‚  â”‚  Sub-Tenants     â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  12 / 50 (24%)          â”‚  â”‚
â”‚  â”‚  Storage         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  15.2 / 50 GB (30%)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  âš ï¸ You are at 69% of your monthly generation limit.                   â”‚
â”‚     Consider upgrading to Enterprise for unlimited generations.        â”‚
â”‚                                                                        â”‚
â”‚  Change Plan                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ STANDARD     â”‚ â”‚ â˜… PREMIUM    â”‚ â”‚ ENTERPRISE   â”‚                   â”‚
â”‚  â”‚ R 499/mo     â”‚ â”‚ R 2,999/mo   â”‚ â”‚ Custom       â”‚                   â”‚
â”‚  â”‚              â”‚ â”‚ Current Plan â”‚ â”‚              â”‚                   â”‚
â”‚  â”‚ [Downgrade]  â”‚ â”‚              â”‚ â”‚ [Contact Us] â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                        â”‚
â”‚  [Cancel Subscription]                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.10 Partner Billing & Reports (Epic 9 - US-028)

**Route**: `/partner/billing`

**Purpose**: View billing history, usage reports, and export data for customer billing.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†] Partner Portal    Billing & Reports                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Billing Summary - January 2026                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Total Amount Due                               R 24,500.00      â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  Breakdown:                                                       â”‚  â”‚
â”‚  â”‚  â€¢ Platform Fee (Premium Plan)                  R 2,999.00       â”‚  â”‚
â”‚  â”‚  â€¢ Additional Generations (450 @ R 5)           R 2,250.00       â”‚  â”‚
â”‚  â”‚  â€¢ Storage Overage (5.2 GB @ R 50)              R 260.00         â”‚  â”‚
â”‚  â”‚  â€¢ Sub-Tenant Usage Fees                        R 18,991.00      â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  [Download Invoice]                    [View Details]            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  Usage by Sub-Tenant                               [Export CSV]        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Tenant         â”‚ Generations â”‚ Storage â”‚ API Calls â”‚ Amount      â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ TechCorp Ltd   â”‚ 245         â”‚ 1.2 GB  â”‚ 12,450    â”‚ R 4,500     â”‚â”‚
â”‚  â”‚ MediaGroup     â”‚ 567         â”‚ 3.1 GB  â”‚ 28,350    â”‚ R 8,200     â”‚â”‚
â”‚  â”‚ StartupXYZ     â”‚ 123         â”‚ 0.5 GB  â”‚ 6,150     â”‚ R 2,100     â”‚â”‚
â”‚  â”‚ ...            â”‚             â”‚         â”‚           â”‚             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                        â”‚
â”‚  Billing History                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Period       â”‚ Amount      â”‚ Status    â”‚ Invoice                  â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ Jan 2026     â”‚ R 24,500    â”‚ â— Due     â”‚ [Download]               â”‚â”‚
â”‚  â”‚ Dec 2025     â”‚ R 22,100    â”‚ âœ“ Paid    â”‚ [Download]               â”‚â”‚
â”‚  â”‚ Nov 2025     â”‚ R 19,800    â”‚ âœ“ Paid    â”‚ [Download]               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                        â”‚
â”‚  AWS Marketplace Metering                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Metering Status: â— Active                                       â”‚  â”‚
â”‚  â”‚  Last Submitted: 2026-01-16 14:30:00                             â”‚  â”‚
â”‚  â”‚  Records This Period: 3,450 generations                          â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚  [View Metering History]                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Screen Rules

### 6.1 Navigation Rules

| Current Screen | Action | Target Screen | Condition |
|----------------|--------|---------------|-----------|
| Payment Success | Click "Start Building" | Dashboard | Payment verified |
| Dashboard | Click "Create New" | Builder (new project) | Always |
| Dashboard | Click project card | Builder (existing) | Project exists |
| Builder | Click "Deploy" | Deployment Modal | Brand score visible |
| Builder | Click agent | Agent Panel (modal) | Agent available |
| Builder | Click "History" | Version History | Project has versions |
| Any | Session timeout | Login redirect | After 30 min |

**Partner Portal Navigation (Epic 9)**:

| Current Screen | Action | Target Screen | Condition |
|----------------|--------|---------------|-----------|
| Any | Click "Partner Portal" | Partner Dashboard | Has `partner_admin` role |
| Partner Dashboard | Click "Update Branding" | Partner Branding | Always |
| Partner Dashboard | Click "Manage" on tenants | Partner Tenants | Always |
| Partner Dashboard | Click "View Usage" | Partner Subscription | Always |
| Partner Dashboard | Click "View Invoice" | Partner Billing | Always |
| Partner Tenants | Click "+ Add Tenant" | Add Tenant Modal | Quota not exceeded |
| Partner Tenants | Click tenant row | Tenant Details | Always |
| Partner Subscription | Click "Downgrade/Upgrade" | Plan Change Modal | Always |
| Partner Branding | Click "Verify Domain" | Domain Verification | Domain entered |

### 6.2 Chat Input Rules

| Action | Behavior | API Call |
|--------|----------|----------|
| Send message | Stream AI response | POST `/generation` |
| Click suggestion | Pre-fill input | None |
| Abort generation | Stop stream | Cancel request |
| Regenerate | Re-send last prompt | POST `/generation` |

### 6.3 Preview Rules

| Trigger | Preview Update | Delay |
|---------|----------------|-------|
| AI generation complete | Full refresh | Immediate |
| Section edit | Partial refresh | 500ms debounce |
| Theme change | CSS variables update | Immediate |
| Device toggle | Viewport resize | Immediate |

### 6.4 Deployment Rules

| Condition | Staging | Production |
|-----------|---------|------------|
| Brand Score < 8.0 | Allowed with warning | Blocked |
| Brand Score 8.0-8.9 | Allowed | Allowed with recommendations |
| Brand Score >= 9.0 | Allowed | Auto-approved |
| Security scan failed | Blocked | Blocked |
| Performance > 3s | Warning | Blocked |

---

## 7. Sequence Diagrams

### 7.1 Page Generation Flow

```mermaid
sequenceDiagram
    participant User
    participant ChatPanel
    participant GenerationAPI
    participant Bedrock as Claude Sonnet 4.5
    participant PreviewPanel
    participant DynamoDB

    User->>ChatPanel: Enter prompt
    ChatPanel->>ChatPanel: Validate input
    ChatPanel->>GenerationAPI: POST /v1/sites/{tenant}/generation

    Note over GenerationAPI,Bedrock: Streaming Response

    GenerationAPI->>Bedrock: Send prompt with context

    loop SSE Stream
        Bedrock-->>GenerationAPI: Token chunk
        GenerationAPI-->>ChatPanel: Stream chunk (SSE)
        ChatPanel->>ChatPanel: Append to message
    end

    Bedrock-->>GenerationAPI: Complete HTML
    GenerationAPI->>DynamoDB: Save version
    GenerationAPI-->>ChatPanel: Generation complete

    ChatPanel->>PreviewPanel: Update preview
    PreviewPanel->>PreviewPanel: Render HTML in iframe
    PreviewPanel-->>User: Display preview
```

### 7.2 Agent Interaction Flow

```mermaid
sequenceDiagram
    participant User
    participant AgentPanel
    participant AgentAPI
    participant StableDiffusion as Stable Diffusion XL
    participant S3

    User->>AgentPanel: Open Logo Creator
    User->>AgentPanel: Enter requirements
    User->>AgentPanel: Click "Generate"

    AgentPanel->>AgentAPI: POST /v1/agents/logo
    AgentAPI->>StableDiffusion: Generate images

    Note over StableDiffusion: 4 variations generated

    StableDiffusion-->>AgentAPI: Image data
    AgentAPI->>S3: Upload images
    S3-->>AgentAPI: Image URLs
    AgentAPI-->>AgentPanel: Logo options

    AgentPanel-->>User: Display 4 logo options
    User->>AgentPanel: Select logo
    User->>AgentPanel: Click "Apply to Page"
    AgentPanel->>AgentPanel: Update page state
```

### 7.3 Deployment Flow

```mermaid
sequenceDiagram
    participant User
    participant DeployModal
    participant ValidationAPI
    participant DeploymentAPI
    participant SQS
    participant S3
    participant CloudFront

    User->>DeployModal: Click "Deploy"
    DeployModal->>ValidationAPI: GET /v1/sites/{id}/validate

    par Parallel Validation
        ValidationAPI->>ValidationAPI: Brand score check
        ValidationAPI->>ValidationAPI: Security scan
        ValidationAPI->>ValidationAPI: Performance test
    end

    ValidationAPI-->>DeployModal: Validation results

    alt All checks passed
        DeployModal-->>User: Show deploy options
        User->>DeployModal: Select "Staging"
        DeployModal->>DeploymentAPI: POST /v1/deployments
        DeploymentAPI->>SQS: Queue deployment
        SQS->>S3: Upload assets
        S3->>CloudFront: Invalidate cache
        DeploymentAPI-->>DeployModal: Deployment complete
        DeployModal-->>User: Show preview URL
    else Validation failed
        DeployModal-->>User: Show errors with fixes
    end
```

---

## 8. Dependency APIs

### 8.1 API Endpoints

**Core Site Builder APIs**:

| Service | Endpoint | Method | Purpose |
|---------|----------|--------|---------|
| Sites | `/v1/sites/{tenant_id}/templates` | GET | List templates |
| Sites | `/v1/sites/{tenant_id}/generation` | POST | Start generation (SSE) |
| Sites | `/v1/sites/{tenant_id}/generation/{id}/advisor` | POST | AI advisor feedback |
| Sites | `/v1/sites/{tenant_id}/files` | GET, POST | File management |
| Sites | `/v1/sites/{tenant_id}/deployments` | GET, POST | Deployment management |
| Agents | `/v1/agents/logo` | POST | Logo generation |
| Agents | `/v1/agents/background` | POST | Background generation |
| Agents | `/v1/agents/theme` | POST | Theme suggestions |
| Agents | `/v1/agents/layout` | POST | Layout generation |
| Agents | `/v1/agents/blog` | POST | Blog content |
| Agents | `/v1/agents/newsletter` | POST | Newsletter generation |
| Validation | `/v1/sites/{id}/validate` | GET | Run all validations |
| Validation | `/v1/sites/{id}/brand-score` | GET | Get brand score |

**Partner Portal APIs (Epic 9)**:

| Service | Endpoint | Method | Purpose |
|---------|----------|--------|---------|
| Partners | `/v1/partners/{partner_id}` | GET | Get partner details |
| Branding | `/v1/partners/{partner_id}/branding` | GET, PUT | Get/update branding config |
| Domain | `/v1/partners/{partner_id}/domain` | POST | Configure custom domain |
| Domain | `/v1/partners/{partner_id}/domain/verify` | POST | Verify domain ownership |
| Tenants | `/v1/partners/{partner_id}/tenants` | GET, POST | List/create sub-tenants |
| Tenants | `/v1/partners/{partner_id}/tenants/{id}` | GET, PUT, DELETE | Manage sub-tenant |
| Admins | `/v1/partners/{partner_id}/admins` | GET, POST | List/invite partner admins |
| Subscription | `/v1/partners/{partner_id}/subscription` | GET, PUT | Get/update subscription |
| Usage | `/v1/partners/{partner_id}/usage` | GET | Get usage metrics |
| Billing | `/v1/partners/{partner_id}/billing` | GET | Get billing summary |
| Reports | `/v1/partners/{partner_id}/billing/reports` | GET | Get billing reports |
| Metering | `/v1/partners/{partner_id}/metering` | GET | Get AWS Marketplace metering |

### 8.2 Environment Configuration

| Environment | API Base URL | Region |
|-------------|--------------|--------|
| DEV | `https://api.dev.kimmyai.io` | eu-west-1 |
| SIT | `https://api.sit.kimmyai.io` | eu-west-1 |
| PROD | `https://api.kimmyai.io` | af-south-1 |

### 8.3 Authentication

| Header | Value | Required |
|--------|-------|----------|
| `Authorization` | `Bearer {jwt_token}` | Yes |
| `X-Tenant-Id` | Tenant identifier | Yes |
| `Content-Type` | `application/json` | Yes |

---

## 9. High Level Epic Overview

### 9.1 Epic 1: AI Page Generation

| User Story | Description | Test Scenario |
|------------|-------------|---------------|
| US-001 | Describe requirements in plain language | Given prompt, then preview in 15s |
| US-002 | Use existing brand assets | Given assets, then applied to output |

### 9.2 Epic 2: Iterative Refinement

| User Story | Description | Test Scenario |
|------------|-------------|---------------|
| US-003 | Provide feedback conversationally | Given feedback, only target sections update |
| US-004 | Version history and rollback | Given versions, can restore any |

### 9.3 Epic 3: Quality & Validation

| User Story | Description | Test Scenario |
|------------|-------------|---------------|
| US-005 | Automatic brand validation | Given page, score calculated |
| US-006 | Security vulnerability scanning | Given code, vulnerabilities detected |

### 9.4 Epic 4: Deployment

| User Story | Description | Test Scenario |
|------------|-------------|---------------|
| US-007 | One-click deployment | Given approved page, deploys to staging |
| US-008 | Performance testing | Given deployment, load time validated |

### 9.5 Epic 6: Site Designer

| User Story | Description | Test Scenario | AI Model |
|------------|-------------|---------------|----------|
| US-011 | Generate professional logos | Given requirements, 4 options generated | Stable Diffusion XL |
| US-012 | Generate background images | Given theme, images generated | Stable Diffusion XL |
| US-013 | Theme suggestions | Given context, themes suggested | Claude Sonnet 4.5 |
| US-014 | Page structure outline | Given requirements, structure proposed | Claude Sonnet 4.5 |
| US-022 | Blog content generation | Given topic/brief, SEO-optimized article generated | Claude Sonnet 4.5 |
| US-023 | Responsive layout generation | Given page purpose, grid-based layout generated | Claude Sonnet 4.5 |
| US-024 | Newsletter template generation | Given brief, email-optimized HTML generated | Claude Sonnet 4.5 |

### 9.6 Epic 9: White-Label & Marketplace (Partner Portal)

| User Story | Description | Test Scenario | Primary Persona |
|------------|-------------|---------------|-----------------|
| US-025 | Configure white-label branding | Given partner login, can upload logo/colors/domain | White-Label Partner |
| US-026 | Delegated partner administration | Given partner, can create/manage sub-tenants | White-Label Partner |
| US-027 | Marketplace subscription management | Given subscription, can view/upgrade/downgrade plan | White-Label Partner |
| US-028 | Partner billing and metering | Given billing period, can view usage/export reports | White-Label Partner |

---

## 10. Data Models

### 10.1 Frontend Types

```typescript
// Project Types
interface Project {
  id: string;
  tenantId: string;
  name: string;
  status: 'draft' | 'staging' | 'production';
  brandScore: number;
  currentVersion: number;
  createdAt: string;
  updatedAt: string;
  deployedUrl?: string;
}

// Generation Types
interface GenerationRequest {
  prompt: string;
  projectId?: string;
  templateId?: string;
  brandAssets?: BrandAssets;
}

interface GenerationResponse {
  id: string;
  html: string;
  css: string;
  version: number;
  brandScore: number;
  suggestions?: string[];
}

// Chat Types
interface ChatMessage {
  id: string;
  role: 'user' | 'assistant' | 'system';
  content: string;
  timestamp: string;
  isStreaming?: boolean;
  metadata?: {
    generationId?: string;
    agentType?: AgentType;
  };
}

// Agent Types
type AgentType = 'logo' | 'background' | 'theme' | 'layout' | 'blog' | 'newsletter' | 'outliner';

interface AgentRequest {
  type: AgentType;
  prompt: string;
  options?: Record<string, unknown>;
}

interface AgentResponse {
  type: AgentType;
  results: AgentResult[];
}

interface AgentResult {
  id: string;
  url?: string;
  content?: string;
  preview?: string;
}

// Validation Types
interface ValidationResult {
  brandScore: number;
  securityPassed: boolean;
  performanceMs: number;
  accessibilityPassed: boolean;
  issues: ValidationIssue[];
}

interface ValidationIssue {
  category: 'brand' | 'security' | 'performance' | 'accessibility';
  severity: 'error' | 'warning' | 'info';
  message: string;
  suggestion?: string;
}

// Deployment Types
interface Deployment {
  id: string;
  projectId: string;
  environment: 'staging' | 'production';
  status: 'pending' | 'deploying' | 'deployed' | 'failed';
  url?: string;
  createdAt: string;
}

// ==========================================
// Epic 9: White-Label & Marketplace Types
// ==========================================

// Partner Types
interface Partner {
  partnerId: string;
  name: string;
  status: PartnerStatus;
  subscription: PartnerSubscription;
  branding: PartnerBranding;
  limits: PartnerLimits;
  marketplaceCustomerId?: string;
  createdAt: string;
  updatedAt: string;
}

type PartnerStatus = 'active' | 'suspended' | 'pending_verification';

interface PartnerBranding {
  logoUrl?: string;
  faviconUrl?: string;
  primaryColor: string;
  secondaryColor: string;
  companyName: string;
  footerText?: string;
  supportEmail: string;
  customDomain?: string;
  domainStatus: DomainStatus;
  hidePoweredBy: boolean;
}

type DomainStatus = 'pending' | 'verified' | 'active' | 'failed';

interface PartnerSubscription {
  plan: SubscriptionPlan;
  status: SubscriptionStatus;
  billingPeriod: 'monthly' | 'annual';
  currentPeriodStart: string;
  currentPeriodEnd: string;
  marketplaceSubscriptionId?: string;
}

type SubscriptionPlan = 'standard' | 'premium' | 'enterprise';
type SubscriptionStatus = 'active' | 'suspended' | 'cancelled' | 'past_due';

interface PartnerLimits {
  maxTenants: number;
  maxGenerationsPerMonth: number;
  maxStorageGb: number;
  maxAdmins: number;
}

// Sub-Tenant Types
interface SubTenant {
  tenantId: string;
  partnerId: string;
  name: string;
  status: 'active' | 'suspended' | 'pending';
  plan: string;
  adminEmail: string;
  createdAt: string;
  usage: SubTenantUsage;
}

interface SubTenantUsage {
  generationsThisMonth: number;
  sitesCount: number;
  storageMb: number;
}

// Partner Usage Types
interface PartnerUsage {
  partnerId: string;
  period: {
    start: string;
    end: string;
  };
  totals: {
    generations: number;
    apiCalls: number;
    storageGb: number;
    activeSites: number;
    activeTenants: number;
  };
  byTenant: TenantUsageSummary[];
  usageVsLimit: {
    generationsUsed: number;
    generationsLimit: number;
    percentage: number;
    alertThresholdReached: boolean;
  };
}

interface TenantUsageSummary {
  tenantId: string;
  tenantName: string;
  generations: number;
  storageMb: number;
}

// Partner Billing Types
interface PartnerBilling {
  partnerId: string;
  period: string;
  currency: string;
  totalAmount: number;
  breakdown: BillingLineItem[];
  byTenant: TenantBillingSummary[];
  invoiceUrl?: string;
}

interface BillingLineItem {
  item: string;
  quantity: number;
  unitPrice: number;
  amount: number;
}

interface TenantBillingSummary {
  tenantId: string;
  tenantName: string;
  amount: number;
}

// Domain Configuration Types
interface DomainConfiguration {
  domain: string;
  status: DomainStatus;
  dnsRecords: DnsRecord[];
}

interface DnsRecord {
  type: 'CNAME' | 'TXT';
  name: string;
  value: string;
}
```

---

## 11. AI Agent Integration

### 11.1 Agent Configuration

| Agent | AI Model | Timeout | Output |
|-------|----------|---------|--------|
| Site Generator | Claude Sonnet 4.5 | 60s | HTML/CSS |
| AI Advisor | Claude Sonnet 4.5 | 30s | Text |
| Logo Creator | Stable Diffusion XL | 30s | 4 images |
| Background Creator | Stable Diffusion XL | 30s | 4 images |
| Theme Selector | Claude Sonnet 4.5 | 15s | 3 themes |
| Layout Agent | Claude Sonnet 4.5 | 20s | Layout spec |
| Blogger | Claude Sonnet 4.5 | 45s | Markdown |
| Newsletter | Claude Sonnet 4.5 | 45s | HTML email |
| Outliner | Claude Sonnet 4.5 | 15s | Structure |

### 11.2 Streaming Implementation

```typescript
// hooks/useChat.ts
const useChat = (projectId: string) => {
  const [messages, setMessages] = useState<ChatMessage[]>([]);
  const [isStreaming, setIsStreaming] = useState(false);

  const sendMessage = async (content: string) => {
    const userMessage: ChatMessage = {
      id: crypto.randomUUID(),
      role: 'user',
      content,
      timestamp: new Date().toISOString(),
    };

    setMessages(prev => [...prev, userMessage]);
    setIsStreaming(true);

    const assistantMessage: ChatMessage = {
      id: crypto.randomUUID(),
      role: 'assistant',
      content: '',
      timestamp: new Date().toISOString(),
      isStreaming: true,
    };

    setMessages(prev => [...prev, assistantMessage]);

    try {
      const response = await fetch(`${API_BASE}/v1/sites/${projectId}/generation`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt: content }),
      });

      const reader = response.body?.getReader();
      const decoder = new TextDecoder();

      while (reader) {
        const { done, value } = await reader.read();
        if (done) break;

        const chunk = decoder.decode(value);
        setMessages(prev => {
          const updated = [...prev];
          const last = updated[updated.length - 1];
          last.content += chunk;
          return updated;
        });
      }
    } finally {
      setIsStreaming(false);
      setMessages(prev => {
        const updated = [...prev];
        const last = updated[updated.length - 1];
        last.isStreaming = false;
        return updated;
      });
    }
  };

  return { messages, sendMessage, isStreaming };
};
```

---

## 12. State Management

### 12.1 Context Structure

```typescript
// context/ProjectContext.tsx
interface ProjectState {
  currentProject: Project | null;
  messages: ChatMessage[];
  preview: {
    html: string;
    css: string;
    device: 'desktop' | 'tablet' | 'mobile';
  };
  validation: ValidationResult | null;
  isGenerating: boolean;
  isSaving: boolean;
}

type ProjectAction =
  | { type: 'SET_PROJECT'; payload: Project }
  | { type: 'ADD_MESSAGE'; payload: ChatMessage }
  | { type: 'UPDATE_PREVIEW'; payload: { html: string; css: string } }
  | { type: 'SET_DEVICE'; payload: 'desktop' | 'tablet' | 'mobile' }
  | { type: 'SET_VALIDATION'; payload: ValidationResult }
  | { type: 'SET_GENERATING'; payload: boolean }
  | { type: 'SET_SAVING'; payload: boolean };
```

### 12.2 React Query Configuration

```typescript
// services/queryClient.ts
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5 minutes
      cacheTime: 30 * 60 * 1000, // 30 minutes
      retry: 2,
      refetchOnWindowFocus: false,
    },
  },
});
```

---

## 13. NFRs

### 13.1 Performance Targets

| Metric | Target |
|--------|--------|
| First Contentful Paint (FCP) | < 1.5s |
| Largest Contentful Paint (LCP) | < 2.5s |
| Time to Interactive (TTI) | < 3.0s |
| AI Generation Response | < 15s |
| Preview Update | < 500ms |
| Bundle Size (gzipped) | < 150KB |

### 13.2 Accessibility

| Requirement | Standard |
|-------------|----------|
| Compliance | WCAG 2.1 AA |
| Keyboard Navigation | Full support |
| Screen Reader | ARIA labels |
| Color Contrast | 4.5:1 minimum |

### 13.3 Browser Support

| Browser | Minimum Version |
|---------|-----------------|
| Chrome | 90+ |
| Firefox | 88+ |
| Safari | 14+ |
| Edge | 90+ |

---

## 14. Security

### 14.1 Authentication

- JWT tokens via Cognito
- Token refresh on expiry
- Tenant isolation via claims

### 14.2 Data Protection

- No sensitive data in localStorage
- All API calls over HTTPS
- Input sanitization on all fields
- XSS prevention in preview iframe (sandbox)

### 14.3 Content Security Policy

```
Content-Security-Policy:
  default-src 'self';
  script-src 'self';
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: https:;
  frame-src 'self' blob:;
  connect-src 'self' https://api.*.kimmyai.io;
```

---

## 15. References

### 15.1 Internal Documentation

- [Parent HLD: BBWS AI-Powered Site Builder](../HLDs/3.0_BBSW_Site_Builder_HLD.md)
- [Parent BRS: BBWS AI-Powered Site Builder](../BRS/3.0_BRS_Site_Builder.md)
- [Customer Portal Frontend LLD](./2.1.1_LLD_Frontend_Architecture.md)

### 15.2 External References

- [React Documentation](https://react.dev)
- [Tailwind CSS](https://tailwindcss.com)
- [Vite](https://vitejs.dev)
- [React Query](https://tanstack.com/query)
- [Framer Motion](https://www.framer.com/motion/)

---

**End of Document**
